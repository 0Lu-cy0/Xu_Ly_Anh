<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ph√¢n lo·∫°i tr√°i c√¢y T∆∞∆°i/H·ªèng - OpenCV</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>üçé Ph√¢n lo·∫°i tr√°i c√¢y T∆∞∆°i/H·ªèng</h1>
      <p class="subtitle">S·ª≠ d·ª•ng k·ªπ thu·∫≠t X·ª≠ l√Ω ·∫£nh v·ªõi OpenCV</p>
    </header>

    <!-- Upload Section -->
    <section class="upload-section">
      <div class="upload-box" id="uploadBox">
        <input type="file" id="fileInput" accept="image/*" hidden>
        <div class="upload-content">
          <div class="upload-icon">üì∏</div>
          <h2>Upload ·∫£nh tr√°i c√¢y</h2>
          <p>Click ƒë·ªÉ ch·ªçn ·∫£nh ho·∫∑c k√©o th·∫£ ·∫£nh v√†o ƒë√¢y</p>
          <p class="file-info">H·ªó tr·ª£: JPG, PNG, BMP, TIFF, WebP, GIF, ICO, PPM, SVG (Max 16MB)</p>
          <button class="btn-primary" id="selectFileBtn">
            Ch·ªçn ·∫£nh
          </button>
        </div>
      </div>
    </section>

    <!-- Loading -->
    <div class="loading" id="loading" style="display: none;">
      <div class="spinner"></div>
      <p>ƒêang ph√¢n t√≠ch ·∫£nh...</p>
    </div>

    <!-- Results Section -->
    <section class="results-section" id="results" style="display: none;">
      <h2>üìä K·∫øt qu·∫£ ph√¢n t√≠ch</h2>

      <!-- Classification Result -->
      <div class="result-card">
        <div class="result-header">
          <h3>üéØ K·∫øt qu·∫£ ph√¢n lo·∫°i</h3>
        </div>
        <div class="result-body">
          <div class="classification-result">
            <div class="status-badge" id="statusBadge">
              <span class="status-icon" id="statusIcon">üçé</span>
              <span class="status-text" id="statusText">FRESH</span>
            </div>
            <div class="health-score">
              <div class="score-label">ƒêi·ªÉm s·ª©c kh·ªèe</div>
              <div class="score-value" id="healthScore">--</div>
              <div class="score-bar">
                <div class="score-fill" id="scoreFill"></div>
              </div>
            </div>
          </div>

          <div class="confidence">
            <strong>ƒê·ªô tin c·∫≠y:</strong> <span id="confidence">--</span>
          </div>

          <div class="reason" id="reason"></div>
        </div>
      </div>

      <!-- Metrics -->
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-icon">üé®</div>
          <div class="metric-label">M√†u s·∫Øc</div>
          <div class="metric-value" id="colorScore">--</div>
        </div>
        <div class="metric-card">
          <div class="metric-icon">üî≤</div>
          <div class="metric-label">Texture</div>
          <div class="metric-value" id="textureScore">--</div>
        </div>
        <div class="metric-card">
          <div class="metric-icon">‚ú®</div>
          <div class="metric-label">B·ªÅ m·∫∑t</div>
          <div class="metric-value" id="smoothScore">--</div>
        </div>
        <div class="metric-card">
          <div class="metric-icon">‚ö†Ô∏è</div>
          <div class="metric-label">V·∫øt h·ªèng</div>
          <div class="metric-value" id="defectCount">--</div>
        </div>
      </div>

      <!-- Visualizations -->
      <div class="result-card">
        <div class="result-header">
          <h3>üî¨ Ph√¢n t√≠ch chi ti·∫øt</h3>
        </div>
        <div class="result-body">
          <div class="images-grid">
            <div class="image-item">
              <img id="imgOriginal" src="" alt="Original">
              <p>·∫¢nh g·ªëc</p>
            </div>
            <div class="image-item">
              <img id="imgHue" src="" alt="Hue">
              <p>Hue (M√†u s·∫Øc)</p>
            </div>
            <div class="image-item">
              <img id="imgSaturation" src="" alt="Saturation">
              <p>Saturation (ƒê·ªô b√£o h√≤a)</p>
            </div>
            <div class="image-item">
              <img id="imgValue" src="" alt="Value">
              <p>Value (ƒê·ªô s√°ng)</p>
            </div>
            <div class="image-item">
              <img id="imgEdges" src="" alt="Edges">
              <p>Edge Detection</p>
            </div>
            <div class="image-item">
              <img id="imgDefects" src="" alt="Defects">
              <p>Ph√°t hi·ªán v·∫øt h·ªèng</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Techniques Used -->
      <div class="result-card">
        <div class="result-header">
          <h3>üìö K·ªπ thu·∫≠t x·ª≠ l√Ω ·∫£nh s·ª≠ d·ª•ng</h3>
        </div>
        <div class="result-body">
          <ul class="techniques-list">
            <li>
              <strong>HSV Color Space:</strong>
              Ph√¢n t√≠ch m√†u s·∫Øc, ƒë·ªô b√£o h√≤a, ƒë·ªô s√°ng
            </li>
            <li>
              <strong>Edge Detection:</strong>
              Sobel, Laplacian, Canny ƒë·ªÉ ph√°t hi·ªán bi√™n
            </li>
            <li>
              <strong>Texture Analysis:</strong>
              Entropy, variance ƒë·ªÉ ƒë√°nh gi√° ƒë·ªô nh√°m b·ªÅ m·∫∑t
            </li>
            <li>
              <strong>Morphological Operations:</strong>
              Erosion, Dilation, Opening, Closing
            </li>
            <li>
              <strong>Adaptive Thresholding:</strong>
              Ng∆∞·ª°ng h√≥a th√≠ch ·ª©ng ƒë·ªÉ t√°ch v√πng
            </li>
            <li>
              <strong>Contour Detection:</strong>
              Ph√°t hi·ªán v√† ƒë·∫øm v√πng khuy·∫øt t·∫≠t
            </li>
          </ul>
        </div>
      </div>

      <button class="btn-secondary" onclick="resetUpload()">
        üîÑ Ph√¢n t√≠ch ·∫£nh kh√°c
      </button>
    </section>

    <!-- Footer -->
    <footer>
      <p>ƒê·ªì √°n m√¥n Nh·∫≠p m√¥n X·ª≠ l√Ω ·∫¢nh - OpenCV</p>
      <p>S·ª≠ d·ª•ng: Python, OpenCV, Flask</p>
    </footer>
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>